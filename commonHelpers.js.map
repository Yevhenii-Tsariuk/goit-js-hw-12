{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44790936-a9a83b9ad64ff44b33786cafe';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nasync function searchPhoto(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n  const response = await axios.get(url);\n  if (response.status !== 200) {\n    throw new Error(response.status);\n  }\n  return response.data;\n}\n\nexport { searchPhoto };\n","export function createPhotoCard(arr) {\n     return arr\n       .map(\n         ({\n           webformatURL,\n           largeImageURL,\n           tags,\n           likes,\n           views,\n           comments,\n           downloads,\n         }) => `\n       <li class=\"gallery-item\">\n         <a class=\"gallery-link\" href=\"${largeImageURL}\" onclick=\"event.preventDefault()\">\n           <img\n             class=\"gallery-image\"\n             src=\"${webformatURL}\"\n             alt=\"${tags}\"\n             width=\"360\"\n             height=\"200\"\n           />\n           <ul class=\"gallery-info\">\n             <li  class=\"gallery-item-text\">\n             <h3 class=\"gallery-subtitle\">Likes</h3>\n             <p class =\"gallery-text\">${likes}</p></li>\n \n             <li class=\"gallery-item-text\">\n             <h3 class=\"gallery-subtitle\">Views</h3>\n             <p class =\"gallery-text\">${views}</p></li>\n \n             <li class=\"gallery-item-text\">\n             <h3 class=\"gallery-subtitle\">Comments</h3>\n             <p class =\"gallery-text\">${comments}</p></li>\n \n             <li  class=\"gallery-item-text\">\n             <h3 class=\"gallery-subtitle\">Downloads</h3>\n             <p class =\"gallery-text\">${downloads}</p></li>\n \n           </ul>\n         </a>\n       </li>`\n       )\n       .join('');\n   }\n\n   function renderImages(gallery, images) {\n    const markup = createPhotoCard(images);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n  }\n  \n  function clearGallery(gallery) {\n    gallery.innerHTML = '';\n  }\n  \n  export { renderImages, clearGallery };","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchPhoto } from \"./js/pixabay-api.js\";\nimport { renderImages, clearGallery } from \"./js/render-functions.js\";\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchForm = document.querySelector('.search-form');\n  const gallery = document.querySelector(\".gallery\");\n  const loader = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more');\n\n  let currentPage = 1;\n  let currentQuery = '';\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  searchForm.addEventListener('submit', handleSearch);\n  loadMoreBtn.addEventListener('click', handleLoadMore);\n\n  async function handleSearch(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    currentQuery = form.elements.query.value.toLowerCase();\n    currentPage = 1;\n\n    clearGallery(gallery);\n    loadMoreBtn.classList.add('hidden');\n    showLoader();\n\n    try {\n      const response = await searchPhoto(currentQuery, currentPage);\n      const { hits, totalHits } = response;\n\n      if (hits.length === 0) {\n        iziToast.warning({\n          position: 'center',\n            messageSize: '16',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#EF4040',\n            messageColor: '#FAFAFB',\n            maxWidth: 450\n        });\n      } else {\n        renderImages(gallery, hits);\n        lightbox.refresh();\n\n        if (hits.length < totalHits) {\n          loadMoreBtn.classList.remove('hidden');\n        }\n      }\n    } catch (err) {\n      iziToast.error({\n        position: 'center',\n          messageSize: '16',\n          title: 'Error',\n          message: `Something went wrong: ${err.message}`,\n          backgroundColor: '#EF4040',\n          messageColor: '#FAFAFB',\n      });\n    } finally {\n      form.reset();\n      hideLoader();\n    }\n  }\n\n  async function handleLoadMore() {\n    currentPage += 1;\n    showLoader();\n\n    try {\n      const response = await searchPhoto(currentQuery, currentPage);\n      const { hits, totalHits } = response;\n\n      renderImages(gallery, hits);\n      lightbox.refresh();\n\n      if (currentPage * 15 >= totalHits) {\n        loadMoreBtn.classList.add('hidden');\n        iziToast.info({\n          position: 'center',\n          messageSize: '16',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#FFA000',\n          messageColor: '#FAFAFB',\n        });\n      }\n      \n      const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n      });\n      \n    } catch (err) {\n      iziToast.error({\n        position: 'center',\n        title: 'Error',\n        messageSize: '16',\n        message: `Something went wrong: ${err.message}`,\n        backgroundColor: '#EF4040',\n          messageColor: '#FAFAFB',\n      });\n    } finally {\n      hideLoader();\n    }\n  }\n\n  function showLoader() {\n    loader.classList.add('visible');\n  }\n\n  function hideLoader() {\n    loader.classList.remove('visible');\n  }\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["API_KEY","BASE_URL","PER_PAGE","searchPhoto","query","page","url","response","axios","createPhotoCard","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","gallery","images","markup","clearGallery","searchForm","loader","loadMoreBtn","currentPage","currentQuery","lightbox","SimpleLightbox","handleSearch","handleLoadMore","event","form","showLoader","hits","totalHits","iziToast","err","hideLoader","cardHeight"],"mappings":"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"}